Prior systems use causal tracing, a powerful technique that traces low-level
events and builds request graphs, to diagnose performance issues. However, they
all assume that accurate causality can be inferred from low-level tracing with
supported communication patterns or obtained from developer's schema upfront
for all involved components.  Unfortunately, based on our study and experience
of building a causal tracing system on macOS, we find it is difficult, if not
impossible, to get accurate request graphs.
We present \xxx, a practical system for debugging performance issues in modern
desktop applications despite the inaccuracy of causal tracing. \xxx lets a user
inspect current diagnostics and provide domain knowledge on demand to counter
the inherent inaccuracy of causal tracing. We implemented \xxx in macOS and
evaluated it on \nbug real-world, open spinning-cursor issues in popular
applications. The root causes of these issues were largely previously unknown.
Our results show that \xxx effectively helps us locate all root causes of the
issues and incurrs only \cpuoverhead CPU overhead in its system-wide tracing.
