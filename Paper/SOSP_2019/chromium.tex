\subsection{chromium IME responsive}
One of the long lasting performance issue in chromium is hanging caused by the non-English input.
When users try to type non English to textFields, such as search box,
the main thread of the browser becomes non responsive.
With lldb it is not hard to tell that the main thread get stuck on FindFirstRect,
where the main thread waits for the signal of condition variable.
According to the history in bug report, the developers realized there were deadlocks somewhere.
However, it was hard to pinpoint due to the multiprocess and multithread programing paradigms.
As a result, timeout was added to prevent the deadlock, but not the long latency.
Although a further bug patch introducing cache helps to eliminate the long hanging mostly, 
the performance issue still appears from time to time.
The senario we can reproduce is to open the website of yahoo and quickly type Simplified Chinese.

The ground true we reveal with out tool is as shown in the picture XXX.
In chromium, there are one browser process and multiple renderer processes.
The main thread of the browser process try to get the caret position.
It sends out the message and wait for the reply on a condition variable.
Usually, a worker thread in the browser process will return the firstrect and wake up the main thread.
Howeve, it requires the message from the main thread of a renderer process to proceed.
Without the message from the renderer process, the worker thread is not able to signal the main thread,
thus, the main thread in will always time out.

Our trace tool will collect the data system wide, therefore, all the thread relationships are captured.
With the trace log size, both the hanging case and non-hanging case are recorded.
From the shared condition variable between threads, we are able to align the logs of the two cases,
and discover the missing message in the hanging case.

As we known the unresponsive of the main thread in the renderer process,
we further consult the analyzed trace log and observe that it is waiting on a semaphre,
and eventually waken by the main thread of the browser process.

Our tool further reveal the root cause of the livelock with conditional debugging.
We can either binary instrument or modify the source code to make the renderer thread accept the attachment of lldb.
The concrete call stacks from lldb disclose the task processing in the renderer thread is related to running javascript.
