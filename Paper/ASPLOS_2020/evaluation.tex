
\section{Performance Evaluation}\label{sec:evaluation}

In this section we present the performance impact of the live deployment of
\xxx. We deployed \xxx on a MacBookPro9,2, which has Intel Core i5-3210M CPU
with 2 cores and 4 thread, 10GB DDR3 memory and a 1T SSD.

As we use the ring buffer to collect events, the space cost for disk is fixed
to the configured size 2G by default. The memory used to collect tracing
items is fixed to 512M by Apple internal, so the memory overhead is pretty low
with regards to the memory usage of modern applications. We measure the the CPU
overhead and throughput of \xxx by running benchmarks in our machine with the
tracing disabled and enabled respectively.

%which we name them bare\_run and tracing\_run.

\paragraph{iBench}
\begin{table}[H]
\footnotesize
\begin{tabular}{l|ccccc}
\hline
 & 1st & 2nd & 3rd & 4th & 5th\\
\hline
 without \xxx& 5.98 & 6.23 & 6.18 & 6.05 & 6.28\\
 with \xxx& 6.29 & 6.01 & 6.09 & 6.28 & 6.01\\
\hline
average overhead& \multicolumn{5}{c}{0.13\%}\\
\hline
\end{tabular}
\caption{Score From iBench}
\label{tab:ibench}
\end{table}

We first show the five runs of iBench for both cases to evaluation the overall performance.
The machine is clean
booted for each run, and the higher score means it perfoms better. As shown in
Table\ref{tab:ibench}, their performance are almost of no difference.

\paragraph{I/O Throughput}

Next, we evaluation the throughput with bonnie++ and iozone on \xxx. As shown in
the Table~\ref{tab:iothroughput},\xxx only add 5\% overhead in average on the io
throughput on disk.

\begin{table}[h]
\footnotesize
\centering
\begin{tabular}{ll|rrr}
\hline
 & kb/s & With Argus & Without Argus & overhead\\
 \hline
bonnie++ &read char & 21922 & 22149 & 0.01\\
 seq& read block & 226931 & 244089 & 0.07\\
 & rewrite & 246807 & 267491 & 0.08\\
 & write char & 22924 & 22936 & 0.00\\
 & write block & 4073361 & 4396387 & 0.07\\
 seq& file create & 17391 & 17381 & 0.00\\
 & file delete & 18089 & 19401 & 0.07\\
 random& create & 17472 & 17887 & 0.02\\
 & delete & 8849 & 9567 & 0.08\\
iozone & initial write & 1199453 & 1318572 & 0.09\\
 & rewerite & 3663066 & 4059912 & 0.10\\
 \hline
 & average & & & 0.05\\
 \hline
\end{tabular}
\caption{IO throughput with bonnie++ and iozone}
\label{tab:iothroughput}
\end{table}


\paragraph{CPU}

We also perform the evaluation the cpu overhead on chromium benchmarks by
comparing the time usage. The result is shown in Table~\ref{tab:chromium
benchmark}. As \xxx collect data in kernel, the sys overhead is relatively
high. Given that most of time are spend in user mode when users use
browser, the overhead overall are mostly under 5\%, except for the
\vv{dummy\_benchmark.histogram}. The overhead for real, user and sys are 7\%,
5\% and 40\% respectively.

\begin{table*}[ht]
\footnotesize
\centering
\begin{tabular}{l|rrr|rrr|ccc}
	\hline
	\hline
Chromium Benchmark&\multicolumn{3}{c}{\textbf{with Argus}} & \multicolumn{3}{c}{\textbf{without Argus}} & \multicolumn{3}{c}{Overhead}\\
(in seconds)& real & user & sys & real & user & sys & real & user & sys \\
\hline
system\_health.memory\_desktop & 11592 & 18424 & 1821 & 11317 & 18401 & 1415 & 0.02 & 0.00 & 0.29\\
rasterize\_and\_record\_micro.top\_25 & 1579 & 2142 & 135 & 1654 & 2166 & 116 & -0.05 & -0.01 & 0.16\\
blink\_perf & 16210 & 17227 & 959 & 15877 & 16724 & 766 & 0.02 & 0.03 & 0.25\\
webrtc & 726 & 2023 & 225 & 725 & 2130 & 168 & 0.00 & -0.05 & 0.34\\
memory.desktop & 1231 & 2238 & 267 & 1188 & 2200 & 190 & 0.04 & 0.02 & 0.41\\
loading.desktop.network\_service & 24580 & 52751 & 6294 & 23696 & 52327 & 4197 & 0.04 & 0.01 & 0.50\\
dromaeo & 206 & 227 & 15 & 192 & 212 & 12 & 0.07 & 0.07 & 0.29\\
dummy\_benchmark.histogram & 49 & 48 & 8 & 33 & 36 & 4 & 0.50 & 0.32 & 0.96\\
v8.browsing\_desktop & 2462 & 4489 & 491 & 2325 & 4440 & 303 & 0.06 & 0.01 & 0.62\\
octan.desktop & 112 & 142 & 8 & 98 & 124 & 5 & 0.14 & 0.15 & 0.44\\
speedometer & 618 & 802 & 31 & 600 & 782 & 24 & 0.03 & 0.03 & 0.32\\
page\_cycler\_v2.typical\_2 & 8020 & 14435 & 1453 & 7847 & 14215 & 1019 & 0.02 & 0.02 & 0.43\\
smoothness.oop\_rasterization.top\_25\_smooth & 864 & 1450 & 156 & 833 & 1412 & 126 & 0.04 & 0.03 & 0.24\\
\hline
AVERAGE & \multicolumn{3}{c}{-} &  \multicolumn{3}{c}{-}  & 0.07 & 0.05 & 0.4\\
\hline
\hline
\end{tabular}
\caption{Chromium benchmark}
\label{tab:chromium benchmark}
\end{table*}
