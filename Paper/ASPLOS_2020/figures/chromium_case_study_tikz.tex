%%\documentclass{article}
%%\usepackage{tikzpeople}
%%\usepackage{tikz}
%%\usetikzlibrary{shapes, shapes.misc}
%%\usetikzlibrary{arrows, arrows.meta, decorations.markings}
%%\usetikzlibrary{patterns}

%%\begin{document}
\begin{center}
\resizebox{\columnwidth}{!}{%
\begin{tikzpicture}[>=latex]
\tikzstyle{every node}=[font=\Large]
\tikzstyle{app} = [draw, very thick, minimum height=40em, minimum width=20em, fill=white, rectangle, font={\sffamily\bfseries}]
\tikzstyle{actionpoint} = [minimum width = 1em, fill = white]
\tikzstyle{point} = [thick, draw=red, cross out, inner sep = 0pt, minimum width = 0.5em, minimum height =0.5em]
%\tikzset{
%%ext/.pic={
%%\path [fill=white] (-0.2,0)to[bend left](0,0.1)to[bend right](0.2,0.2)to(0.2,0)to[bend left](0,-0.1)to[bend right](-0.2,-0.2)--cycle;
%%\draw (-0.2,0)to[bend left](0,0.1)to[bend right](0.2,0.2) (0.2,0)to[bend left](0,-0.1)to[bend right](-0.2,-0.2);
%%},
%point/.style={
%    thick,
%    draw=red,
%    cross out,
%    inner sep=0pt,
%    minimum width=4pt,
%    minimum height=4pt,
%}}

%draw applications
\node [app, name = browser]{};
\node (browsertag)[minimum width = 20em, above = -2em of browser] {Chromium Browser};
\node (browserend)[minimum width = 20em, below = 38em of browsertag] {};
\node (bt1begin)[minimum width = 8em, below left = 3em and -10em of browsertag]{main thread};
\node (bt1end)[minimum width = 8em, below left = 38em and -10em of browsertag]{};
\node (bt2begin)[minimum width = 8em, below right = 3em and -10em of browsertag]{worker thread};
\node (bt2end)[minimum width = 8em, below right = 38em and -10em of browsertag]{};
\draw [solid] (bt1begin) -- (bt1end);
\draw [solid] (bt2begin) -- (bt2end);
\node (1)[actionpoint, below of = bt1begin, node distance = 8em]{1};
\node (2)[actionpoint, below of = bt2begin, node distance = 9em]{2};
\node (9)[actionpoint, below of = 2, node distance = 16em] {9};
\node (10)[actionpoint, below of = 1, minimum width = 6em, minimum height = 2em, node distance = 18em, rotate=270]{timed wait};
%\node (11)[actionpoint, below of = 10, node distance = 4em]{};

\node [app, name = renderer, right of = browser, node distance = 25em]{};
\node (renderertag)[minimum width = 20em, above = -2em of renderer] {Chromium Renderer};
\node (rendererend)[minimum width = 20em, below = 38em of renderertag]{};
\node (bt3begin)[minimum width = 8em, below left = 3em and -10em of renderertag]{worker thread};
\node (bt3end)[minimum width = 8em, below left = 38em and -10em of renderertag]{};
\node (bt4begin)[minimum width = 8em, below right = 3em and -10em of renderertag]{main thread};
\node (bt4end)[minimum width = 8em, below right = 38em and -10em of renderertag]{};
\draw [solid] (bt3begin) -- (bt3end);
\draw [solid] (bt4begin) -- (bt4end);
\node (3)[actionpoint, below of = bt3begin, node distance = 10em]{3};
\node (4)[actionpoint, below of = bt4begin, node distance = 11em]{4};
\node (7)[actionpoint, below of = 4, node distance = 11em, rotate=270] {sema};
\node (8)[actionpoint, below of = 3, node distance = 13em]{8};

\node [app, name = fontd, right of = renderer, node distance = 25em]{};
\node (fontdtag)[minimum width = 20em, above = -2em of fontd] {fontd};
\node (fontdend)[minimum width = 20em, below = 38em of fontdtag]{};
\node (bt5begin)[minimum width = 20em, below = 3em of fontdtag]{worker thread};
\node (bt5end)[minimum width = 20em, below = 38em of fontdtag]{};
\draw [solid] (bt5begin) -- (bt5end);
\node (5)[actionpoint, below of = bt5begin, node distance = 14em] {5};
\node (6)[actionpoint, below of = 5, node distance = 3em] {6};

\draw [->] (1) -- (2);
\draw [->] (2) -- (3);
\draw [->] (3) -- (4);
\draw [->] (4) -- (5);
\coordinate[name = notarrive7, point, right of = 7, node distance = 1em];
\draw [->] (6) -- (notarrive7);
\coordinate[name = before7, above of = 7, node distance = 1em]{};
\draw [->] (before7) -- (8);
\draw [->] (8) -- (9);
\coordinate[name = notarrive10, point, right of = 10, node distance = 1em]{};
\draw [->] (9) -- (notarrive10);

\node (findfirstrect)[minimum width = 40em, minimum height = 4em, right of = 1, node distance = 13em, rotate = 355] {TextInputClientMsg\_FirstRectForCharacterRange};
\node (javascript)[minimum width = 4em, minimum height = 4em, above left = 0em and 2em of 7, rotate = 15] {Run\_Javascript};
\end{tikzpicture}
}
\end{center}
%%\end{document}
