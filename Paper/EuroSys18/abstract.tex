MacOS is well known for its user experience.
However, performance bugs still exist, as such, spinning cursors appear from time to time.
Although the reason why it appears is straightforward based on its mechanism that the main UI thread is too busy to process user input, its root cause, for example, a piece of inefficient code, is still hard to diagnose.
%dependency graph is useful to diagnose performance bugs
Tracking the performance bug where the lagging or unresponsiveness of applications stem, is complicated due to the massive interactions among threads, such as the user transactions running concurrently in the system and background daemons.
Lack of source code makes the tracking even more challenging.
%as it is difficult to detangle thread activities on the behalf of different user transactions running cucurrently in the system, as well as the background heartbeat threads.
\par
Fortunately, the knowledge of the implementation of programming paradigms lessens the difficulty to some degree.
Instrumentation in middle-ware and kenel with the knowledge could help developers to recognize the relationships among threads temporally.
Thread activies and relationships for one user transaction provides the developer a dependency graph for further disgnosis. 
%short-commings of dynamic generated dependency graph
However, without the in-depth understanding of a system, especially when it is not open source, the integrity and completeness of the dependency graph is hard to guarantee.
The incorrect graph becomes less useful, even misleading.
\par
%how to address
In this paper, we focus on Apple's MacOS and address the challenge from a system level.
As is in other systems, the thread activity is traced with a name that stands for its functionality and atrributes related to it in some execution point, which is called an event.
The events traced either represent the execution boundary inside a thread for a request, or record potential connections with other events. 
With these events,the dependency graph can be generated with the execution segments divided by the boundary event as nodes and connections of events in execution segmenst as edges.
As it is not straightforward to achieve the goal of integrity and completeness, inspectors are provided for developers to discover the over connections and under connections.
The recognized wrong connections give the developers guidance to further explore special programming paradigms in a less familiar system.
We further provides a method for binary instrumentaion to add tracing events in proper binary code to uncover the missing boundaries and connections.
As a result, developers can rectify the dependency graph with knowledge accumulatively and use it to figure out the inefficient code causing performance bugs.

% for the programming paradigms, the dependency graph gets improved accumulatively on correctness and hence usefulness in performance bug diagnosis.
% from various levels, including libraries, frameworks in the middleware and kernel.
%It is expected to help developers to figure out the critical paths of user transactions and enlight them on the inefficient code causing performance bugs.
